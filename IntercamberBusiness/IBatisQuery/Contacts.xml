<?xml version="1.0" encoding="utf-8" ?>
<sqlMap namespace="Intercamber.Dao.Contacts" xmlns="http://ibatis.apache.org/mapping" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" >
    <alias>
        <typeAlias alias="Contacts" type="CML.Intercamber.Business.Model.Contacts"/>
        <typeAlias alias="ContactDetail" type="CML.Intercamber.Business.Model.ContactDetail"/>
    </alias>

	<resultMaps>
        <resultMap id="ContactsResult" class="Contacts">
			<result property="IdUser" column="IdUser" />
			<result property="IdUserContact" column="IdUserContact" />
			<result property="DateAdd" column="DateAdd" />
        </resultMap>

        <resultMap id="ContactDetailResult" class="ContactDetail">
            <result property="IdUser" column="IdUser" />
            <result property="FirstName" column="FirstName" />
            <result property="LastName" column="LastName" />
        </resultMap>
    </resultMaps>

    <statements>

        <select id="CML.Intercamber.Contacts.ListContactsByUser" resultMap="ContactDetailResult" parameterClass="long">
            SELECT u.IdUser, u.FirstName, u.LastName
            FROM Contacts c
            INNER JOIN Users u ON u.IdUser = c.IdUserContact
            WHERE c.IdUser = #value#
        </select>

        
        
        
        <update id="CML.Intercamber.Contacts.UpdateContacts" parameterClass="Contacts" >
            UPDATE Contacts
            SET IdUser = #IdUser#, IdUserContact = #IdUserContact#, DateAdd = #DateAdd#
            WHERE 
				TODO
        </update>

        <insert id="CML.Intercamber.Contacts.InsertContacts" parameterClass="Contacts">
			INSERT INTO Contacts (IdUser, IdUserContact, DateAdd)
			VALUES ( #IdUser#, #IdUserContact#, #DateAdd# )
        </insert>

        <delete id="CML.Intercamber.Contacts.DeleteContacts" parameterClass="string">
            DELETE FROM Agent 
			WHERE 
				TODO 
        </delete>

    </statements>

</sqlMap>
